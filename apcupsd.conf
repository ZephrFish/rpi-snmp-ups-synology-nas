# apcupsd.conf v1.1 - apcupsd configuration file
# Configured for Docker/USB UPS on Proxmox

## ============ Main configuration parameters ============

# UPS type - usb for modern USB-connected APC UPSes
UPSTYPE usb

# Device (leave blank for USB auto-detection)
# DEVICE /dev/usb/hiddev0
DEVICE

## ============ Power failure thresholds ============

# Low battery threshold (percentage)
BATTERYLEVEL 5

# Minutes on battery before shutdown
MINUTES 3

# Time in seconds to wait before shutting down after power failure
TIMEOUT 0

# ANNOY delay between messages (seconds)
ANNOY 300

# ANNOYDELAY time to wait before first annoyance
ANNOYDELAY 60

# NOLOGON disable logins during power failure
NOLOGON disable

## ============ Network Information Server (NIS) ============

# Enable Network Information Server
NETSERVER on

# NIS IP address to listen on (0.0.0.0 = all)
NISIP 0.0.0.0

# NIS port
NISPORT 3551

# Events that trigger wall/shutdown messages
# Power failure, low battery, runtime limit reached, etc.
ONBATTERYDELAY 6
BATTERYLEVEL 5
MINUTES 3
TIMEOUT 0

## ============ Callback script for NAS shutdown ============

# Script to run when power fails (can trigger NAS shutdown)
# This is optional if you only need SNMP exposure
ANNOYCMD /etc/apcupsd/annoy
ONBATTERY /etc/apcupsd/onbattery
OFFBATTERY /etc/apcupsd/offbattery
SHUTDOWN /etc/apcupsd/doshutdown
